(()=>{document.addEventListener("DOMContentLoaded",function(){document.body.addEventListener("click",function(r){let e=r.target.closest(".mshps-delete-draft");if(!e)return;r.preventDefault();let n=e.getAttribute("data-submit-id");n&&confirm(`\xCAtes-vous s\xFBr de vouloir supprimer ce brouillon ?

Cette action est irr\xE9versible.`)&&(e.disabled=!0,e.style.opacity="0.5",e.style.cursor="wait",fetch(`/wp-json/mshps/v1/draft/${n}`,{method:"DELETE",headers:{"Content-Type":"application/json","X-WP-Nonce":window.wpApiSettings?.nonce||""},credentials:"same-origin"}).then(t=>t.ok?t.json():t.json().then(o=>{throw new Error(o.message||"Erreur lors de la suppression")})).then(t=>{let o=e.closest("tr");o?(o.style.transition="opacity 0.3s",o.style.opacity="0",setTimeout(()=>{o.remove();let s=document.querySelector('[data-dataview="mes-brouillons"] tbody');s&&s.querySelectorAll("tr").length===0&&window.location.reload()},300)):window.location.reload()}).catch(t=>{alert(`Erreur lors de la suppression du brouillon.

`+t.message),e.disabled=!1,e.style.opacity="1",e.style.cursor="pointer"}))})});})();
